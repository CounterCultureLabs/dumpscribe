
Downloads all written notes and recorded audio from a LiveScribe Pulse or Echo pen.

This program has four parts:
 
# dumpscribe

The dumpscribe command downloads and extracts all relevant info from the smartpen in the raw format as it exists on the pen. The audio is in aac format. The written notes are in a proprietary format called stf and the meta-data is in a combination of XML and undocumented binary files.

## Usage

```
./dumpscribe [-d] output_dir

Where output_dir is a directory where the downloaded data will be saved.
The -d flag enables more verbose output which is useful for debugging.
```

# convert_and_organize.py

The convert_and_organize.py command converts written notes to PDF, converts audio data to Ogg Vorbis, parses meta-data and puts everything into a sane folder structure. It can optionally generate PNG thumbnails of the PDFs.

## Usage

```
Usage: convert_and_organize.py [-h] [--aac] [--thumb] [--thumbsize THUMBSIZE]
                               input_dir output_dir

Convert file formats and organize output from dumpscribe.

positional arguments:
  input_dir             The directory generated by dumpscribe.
  output_dir            Where to write the output from this program.

optional arguments:
  -h, --help            show this help message and exit
  --aac                 Don't convert aac audio files to ogg vorbis.
  --thumb               Generate png thumbnails of pdfs.
  --thumbsize THUMBSIZE
                        Set thumbnail maximum dimension.
```

# usb_watcher.py

The usb_watcher.py command waits for a smartpen to be connected to USB and then runs first dumpscribe, then convert_and_organize.py and optionally a user-supplied command at the end (e.g. to upload the resulting data to a server). It is meant to be run as a daemon.

## Usage

```
Usage: usb_watcher.py [-h] [-d] [-c POST_COMMAND]
                      dumpscribe_dir dumpscribe_output_dir
                      organized_output_dir

Automatically run dumpscribe when LiveScribe pen is connected.

positional arguments:
  dumpscribe_dir        The full path to the directory where dumpscribe is
                        installed.
  dumpscribe_output_dir
                        Where dumpscribe should place its output.
  organized_output_dir  Where convert_and_organize should place its output.

optional arguments:
  -h, --help            show this help message and exit
  -d                    Daemonize this process
  -c POST_COMMAND       Command to run after running convert_and_organize.py
```

# dumpscribe-browser

A simple node.js web app that lets users browse the written and recorded notes.

# Requirements

TODO list the required packages

# Compiling

The dumpscribe command is a C program and needs to be compiled. Just run:

```
make
```

# TODO

* Add upstart script
* Make dumpscript calculate and write timestamp offset to disk when run
** Needs to get the current time from peninfo, calc offset, and write
* Add command line arguments to dumpscribe
* Add support for deleting files from the pen (need to reverse-engineer)
* Get rid of compile warnings related to xmlChar vs. char

# License and Copyright

dumpscribe and convert_and_organize.py is based on, and contains code from, the following projects:

* [libsmartpen](https://github.com/srwalter/libsmartpen)
* [LibreScribe](https://github.com/dylanmtaylor/LibreScribe)

dumpscribe-browser contains some code from [phoenix](https://github.com/pfraze/phoenix). For copyright and license info see the file browser/COPYING.

## License

dumpscribe and convert_and_organize.py (and its dependencies included in this repository) are licensed under GPLv2. For more info see the COPYING file.

dumpscribe-browser is licensed under the license in 

## Copyright

The code used in dumpscribe and convert_and_organize.py has had multiple contributors. Not all of them have identified themselves clearly.

* Copyright 2010 to 2011 Steven Walter (https://github.com/srwalter)
* Copyright 2010 Scott Hassan
* Copyright 2011 jhl (?)
* Copyright 2011 Nathanael Noblet (nathanael@gnat.ca)
* Copyright 2011 to 2013 Dylan M. Taylor (webmaster@dylanmtaylor.com)
* Copyright 2013 Yonathan Randolph (yonathan@gmail.com) 
* Copyright 2014 Robert Jordens (https://github.com/jordens)
* Copyright 2014 Ali Neishabouri (ali@neishabouri.net)
* Copyright 2014 Marc Juul (scribedump@juul.io)
